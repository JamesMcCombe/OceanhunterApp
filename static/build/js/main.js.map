{"version":3,"names":[],"mappings":"","sources":["main.coffee"],"sourcesContent":["class OceanHunter\n  constructor: ->\n    @removeMobileHover()\n    $('input, textarea').placeholder()\n    FastClick.attach(document.body)\n    $(document).foundation()\n\n    @bindRevealAction()\n    @bindRevealBlur()\n\n  # after you change the content in the fixed-to-bottom-wrapper,\n  # you have to call this again\n  reAdjustFixedBottom: ->\n    $('body').css 'padding-bottom', ->\n      $('.fixed-to-bottom-wrapper').height()\n\n  _showFixedBottom: ->\n    $('.fixed-to-bottom-wrapper')\n      .css 'opacity', 1\n\n  bindRevealAction: ->\n    $(document).on 'mouseenter', '[data-action]', (e) ->\n      elm = $ e.target\n      title = elm.data 'title'\n      if title?\n        title_wrap = elm.closest('.reveal-modal').find('h2')\n        title_wrap.text title\n    .on 'mouseleave', '[data-action]', (e) ->\n      elm = $ e.target\n      title_wrap = elm.closest('.reveal-modal').find('h2')\n      title = title_wrap.data 'title-origin'\n      title_wrap.text title\n\n  bindRevealBlur: ->\n    $(document).on 'open.fndtn.reveal', '.oc-reveal-modal-blur', (e) ->\n      $('.page-wrap').addClass 'blur'\n    $(document).on 'close.fndtn.reveal', '.oc-reveal-modal-blur', (e) ->\n      $('.page-wrap').removeClass 'blur'\n\n  isSmallScreen: ->\n    $(window).width() <= 640\n\n  isHighDensity: ->\n    if window.matchMedia?\n      window.matchMedia('only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)').matches \\\n      or window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)').matches\n    else if window.devicePixelRatio?\n      window.devicePixelRatio > 1.3\n\n  # check if user logined, if not reveal the alert ask user to signup or login\n  checkLoginAndAlert: ->\n    if not OC.user.logined\n      $('#loginAlertModal').foundation('reveal', 'open')\n    OC.user.logined\n\n  # disable :hover on touch devices\n  # https://gist.github.com/javan/4404503\n  removeMobileHover: ->\n    if 'createTouch' of document\n      ignore = /:hover\\b/\n      try\n        for stylesheet in document.styleSheets\n          idxs = []\n          # detect hover rules\n          for rule, idx in stylesheet.cssRules\n            if rule.type is CSSRule.STYLE_RULE and ignore.test(rule.selectorText)\n              idxs.unshift idx\n\n          # delete hover rules\n          stylesheet.deleteRule idx for idx in idxs\n\n\n$ ->\n  window.oh = new OceanHunter\n  oh.reAdjustFixedBottom()\n  oh._showFixedBottom()\n  $('.fixed-to-bottom-wrapper').imagesLoaded(oh.reAdjustFixedBottom);\n"],"file":"main.js","sourceRoot":"/source/"}