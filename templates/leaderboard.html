{% extends 'base.html' %}

{% load staticfiles sekizai_tags thumbnail humanize %}

{% block header %}
  {# remove footer #}
{% endblock header %}

{% block footer %}
  {# remove footer #}
{% endblock footer %}

{% block nav_title %}
<li class="filter-button hide-on-menu-expanded" data-reveal-id="filterModal"><i class="icomoon-filter"></i></li>
<li class="name">
   <h1><a href="#">Leader board</a></h1>
</li>
{% endblock nav_title %}

{% block content %}

{% addtoblock 'body-class' %} page-leaderboard {% endaddtoblock %}

<div class="row">
  <ul class="columns small-12 filters">
    <li class="filter">King Fish <sup><a class="close">&#215;</a></sup></li>
    <li class="filter">Auckland <sup><a class="close">&#215;</a></sup></li>
    <li class="filter">Team <sup><a class="close">&#215;</a></sup></li>
    <li class="filter">Junior <sup><a class="close">&#215;</a></sup></li>
    <li class="filter">Male <sup><a class="close">&#215;</a></sup></li>
    <li class="filter">Open Team <sup><a class="close">&#215;</a></sup></li>
  </ul>
</div>
<ul class="solos">
  {% for u in page.object_list %}
  <li class="solo">
    <div class="row">
      <div class="columns small-12">
        <div class="row collapse">
          <div class="columns small-4">
            <a href="{% url 'userfish' u.id %}">
              {% thumbnail u.profile.biggest_fish.image "200x200" crop="center" as im %}<img src="{{ im.url }}">{% endthumbnail %}
            </a>
          </div>
          <div class="columns small-8 content">
            <div class="name">{{ forloop.counter|add:start|ordinal }} | <a href="{% url 'userfish' u.id %}">{{ u.first_name }} {{ u.last_name }}</a></div>
            <div class="city">{{ u.profile.city }}</div>
            <div class="points">{{ u.profile.points }} Points</div>
          </div>
        </div>
      </div>
    </div>
  </li>
  {% endfor %}
</ul>


<div id="filterModal" class="reveal-modal oc-reveal-modal oc-reveal-modal-full oc-reveal-modal-blur filter-reveal-modal collapse" data-reveal data-options="animation:fade">
  <form method="get">
    <div class="row">
      <div class="columns small-6"><label>{{ form.city.label }}{{ form.city }}</label></div>
      <div class="columns small-6"><label>{{ form.species.label }}{{ form.species }}</label></div>
    </div>
    {% for field in radios %}
      <div class="row">
        {% for radio in field %}
          <div class="columns small-6">
            <input type="radio" name="{{ radio.name }}" id="{{field.auto_id}}_{{radio.index}}" value="{{ radio.choice_value }}" {% if radio.is_checked %}checked=checked{% endif %} >
            <label for="{{ field.auto_id }}_{{ radio.index }}">{{ radio.choice_label }}</label>
          </div>
        {% endfor %}
      </div>
    {% endfor %}
    <div class="row">
      <div class="columns small-6"><button class="close"><i class="icomoon-cross"></i></button></div>
      <div class="columns small-6"><button class="submit"><i class="icomoon-check"></i></button></div>
    </div>
  </form>
</div>


{% addtoblock 'js' %}
<script>
  $(function() {
    // for debug
    // $('#filterModal').foundation('reveal', 'open');

    // close modal
    $('.close').click(function(e) {
      e.preventDefault();
      $('#filterModal').foundation('reveal', 'close');
    });
  });
</script>
{% endaddtoblock %}

{% endblock content %}
